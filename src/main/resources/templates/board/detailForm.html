<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>게시글 상세</title>
  <style>
  #content{
    height: auto;
    min-height: 400px;
    width: 100%;
  }
  #button-container{
    width: 840px;
    padding-left: 10px;
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
  }
  button{
    cursor: pointer;
    border: none;
    padding: 5px 20px;
    border-radius: 6px;
    font-weight: bolder;
    font-size: medium;
  }
  #editBtn{
    margin-right: 10px;
  }
  .container{
    border: 1px solid #ebecef;
    border-radius: 6px;
  }
  .board-container{
    width: 800px;
    padding: 29px 29px 0;
  }
  .comment-container{
    width: auto;
    padding: 15px;
    margin: 13px 0px;
  }
  hr{
    border: 1px solid #ebecef;
  }
  .comment-header{
    display: flex;
    justify-content: space-between;
  }
  a{
    cursor: pointer;
    margin-left: 10px;
    text-decoration: none;
    color: gray;
    font-size: small;
  }
  .comment-upper{
    margin: 13px 0px;
    font-weight: bolder;
  }
  #addBtn{
    display: block;
    margin: 10px 0px 0px 0px;
    padding: 0px;
    border: 0px;
    font-weight: inherit;
    font-size: small;
    color: gray;
    background-color: white;
  }
  textarea{
    margin: 10px 0px 0px 0px;
    border: 0px;
    padding: 10px;
    outline: none;
    resize: none;
    background-color: #f8f9fa;
  }
</style>
</head>
<body>
<h3>게시글</h3>
<div id="button-container">
  <span>
    <button id="editBtn" type="button" th:data-bnum="${detailForm.bnum}" th:if="${session.loginMember.id}==${detailForm.bid}">수정</button>
    <button id="delBtn" type="button" th:data-bnum="${detailForm.bnum}" th:if="${session.loginMember.id}==${detailForm.bid}">삭제</button>
  </span>
  <span>
    <div><button onclick="location.href='/board'">목록</button></div>
  </span>
</div>
<div class="container board-container">
  <div>
    <div th:text="${detailForm.btitle}">제목</div>
    <div>
      <span th:text="${detailForm.nickname}">닉네임</span>
      <span th:text="${detailForm.budate}">날짜</span>
      <span th:text="${detailForm.bhit}">조회수</span>
    </div>
  </div>
  <hr>
  <div id="content" th:text="${detailForm.bcontent}">본문</div>
<!--  <hr>-->
<!--  <div id="comment-container">-->
<!--    <div class="comment-upper">댓글</div>-->
<!--    <block th:each="">-->
<!--      <div>-->
<!--        <div class="comment-header"><span>닉네임</span><span><a href="">수정</a><a href="">삭제</a></span></div>-->
<!--        <div>댓글</div>-->
<!--        <div><span>날짜</span><a href="">대댓글쓰기</a></div>-->
<!--      </div>-->
<!--    </block>-->
<!--  </div>-->
<!--  <div class="container comment-container">-->
<!--    <form action="">-->
<!--      <div>닉네임</div>-->
<!--      <textarea name="" cols="104" rows="10" placeholder="댓글을 입력하세요" autofocus></textarea>-->
<!--      <button type="submit" id="addBtn">등록</button>-->
<!--    </form>-->
<!--  </div>-->
</div>
<script>
  //수정 버튼
  editBtn.addEventListener('click', e=>{
    const bnum = e.target.dataset.bnum;
    const url = `/board/${bnum}/edit`;
    location.href = url;
  });

  //삭제 버튼
  delBtn.addEventListener('click', e=>{
  //댓글이 달린경우 삭제가 안된다 알려야함
    if(window.confirm('댓글이 있는 게시글은 본문 삭제만 가능합니다.<br> 정말 삭제하시겠습니까?')){
      const bnum = e.target.dataset.bnum;
      const url = `/board/${bnum}/del`;
      location.href = url;
    }
  });
</script>
</body>
</html>